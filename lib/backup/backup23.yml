tasks:
  - name: web
    source: files

    files: 
      sources:
        - ~/tmp/src/dir1
        - ~/tmp/src/dir2
        - ~/tmp/src/file1
      exclude:
        - ignore.file
        - "*.tmp"
        - "sub1/"
      
    destinations:
      - dir: ~/tmp/dest/2
      - dir: ~/tmp/dest/1
      - aws_s3:

  - name: db 
    source: mongodb
    destinations:
      - dir: ~/tmp/dest/1
      - aws_s3:

default_options:
  name: backup
  source: files
  mongodb: wdcv_development
  destinations: 
    - dir: ~/tmp2/
    - aws_s3:
        bucket: '<%= ENV['WDCV_AWS_S3_BUCKET_NAME'] %>'
        access_key_id: '<%= ENV['WDCV_AWS_S3_ACCESS_KEY_ID'] %>'
        secret_access_key: '<%= ENV['WDCV_AWS_S3_SECRET_ACCESS_KEY'] %>'
  encryption_passphrase: '<%= ENV['WDCV_BACKUP_ENCRYPTION_PASSPHRASE'] %>'

  # Uses system tmp folder if 'tmp_dir' is not defined 
  #tmp_dir: ~/tmp/  
